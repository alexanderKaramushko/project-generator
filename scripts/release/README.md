# Релизные скрипты project-generator

## Цель

Нужно обеспечить стабильные предрелизы и релизы. <br/>
Предрелизы должны производится с каждым новым вливанием в main. <br/>
Релизы производятся вручную после тестов предрелизов.

## Глоссарий

canary-версия/prerelease – предрелизная версия, которая ставится в проект для тестирования  <br/>
stable release – протестированная релизная версия  <br/>

## Процесс

На данном этапе нет автоматизации релизов через cron job и пайплайны.

## Release

1. Создать новую ветку с новой версией на основе ветки последнего stable release
   Пример: git checkout -b pg-template-builder@1.1.0 pg-template-builder@1.0.0
2. Создается сборка для canary-версии, далее prerelease
3. Публикуется prerelease на основе переданного commit sha
4. Canary-версия тестируется на предмет правильной работы
5. Если все ок, то тогда проводится stable release
6. Создается тег релиза с указанием версии и описанием изменений
7. Создается запись в CHANGELOG.md с указанием версии и описанием изменений

## Patch-релизы

1. Создать новую ветку с новой версией на основе ветки последнего stable release
   Пример: git checkout -b pg-template-builder@1.0.1 pg-template-builder@1.0.0
2. Внести изменения
3. Провести [release](#Release)

## Скрипты

| Скрипт      | Назначение |
| ------------- | ------------- |
| build       | запуск тестов, сборка артифактов  |
| prerelease  | публикация canary-версии на основе переданного commit sha  |
| release     | публикация release-версии на основе последней canary-версии  |
