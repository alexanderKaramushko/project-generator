# Релизные скрипты project-generator

## Цель

Нужно обеспечить стабильные предрелизы и релизы. <br/>
Предрелизы должны производится с каждым новым вливанием в main. <br/>
Релизы производятся вручную после тестов предрелизов.

## Глоссарий

canary-версия/prerelease – предрелизная версия, которая ставится в проект для тестирования  <br/>
stable release – протестированная релизная версия  <br/>

## Процесс

На данном этапе нет автоматизации релизов через cron job и пайплайны.

## Релизы

1. Создать новую ветку с новой версией на основе ветки последнего stable release
   Пример: git checkout -b pg-template-builder@1.1.0 pg-template-builder@1.0.0
2. Создается сборка для canary-версии, далее prerelease
3. Публикуется prerelease на основе HEAD
4. Canary-версия тестируется на предмет правильной работы
5. Если все ок, то тогда проводится stable release
6. Создается тег релиза с указанием версии и описанием изменений.
   Название релиза генерируется случайно и является уникальным.
7. Создается запись в CHANGELOG.md с указанием версии и описанием изменений

## Patch-релизы

1. Создать новую ветку с новой версией на основе ветки последнего stable release
   Пример: git checkout -b pg-template-builder@1.0.1 pg-template-builder@1.0.0
2. Внести изменения
3. Провести [релиз](#Релизы)

## Скрипты

| Скрипт      | Назначение |
| ------------- | ------------- |
| prerelease  | публикация canary-версии на основе HEAD  |
| release     | публикация release-версии на основе последней canary-версии  |

## Вопрос-ответ

**Почему нет ограничения не рализ только из master?** <br/>
Релиз из master должен проходить через CI/CD.
В нашем случае CI/CD пока не нужен и сами скрипты запускают
все проверки перед релизом.

**Почему релизной версии должна предшествовать предрелизная версия?** <br/>
Предрелизная версия позволяет установить и протестировать пакет,
чтобы перед релизом удостоверится, что все работает так как надо.
